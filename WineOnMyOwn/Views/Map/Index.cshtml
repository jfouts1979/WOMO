<head>
    <title></title>

    <style>
        /* Always set the map height explicitly to define the size of the div
        * element that contains the map. */
        #map {
            height: 400px;
            width: 400px;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head><br /><br /><br />

<div id="map"></div>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
    var map;

    function initMap() {
        map = new google.maps.Map(document.getElementById('map'),
            {
                zoom: 7,
                center: new google.maps.LatLng(38.328732, -85.764771),
                mapTypeId: 'terrain'
            });

        var script = document.createElement('script');

        $.ajax({
            url: "/Map/GetRadiusMarkers",
            dataType: "json",
            type: "GET",
            contentType: 'application/json; charset=utf-8', //define a contentType of your request
            cache: false,


            success: function (data) { //data is your result from controller
                //if (data.Success ==  true) {
                //    alert('here');
                //for (var i = 0; i < data.length; i++) {
                //    alert(data[0].Lat);
                //    alert(data[0].Lng);
                //data: { Lat: data.latitude};
                // access each item like this. if list is of any complex type the use result[0].Name // say name is a proprty of the complex type
                //}


                //for (var i = 0; i < data[0].length; i++) {
                //var latitude = data[i].Lat;
                //var longitude = data[i].Lng;
                //var latLng = new google.maps.LatLng(latitude,longitude);
                //var marker = new google.maps.Marker({
                //    position: latLng,
                //    map: map
                //});
                //}

                jQuery.each(data,
                    function (index, value) {
                        //console.log(value);
                        var latitude = data[index].Lat;
                        var longitude = data[index].Lng;
                        var latLng = new google.maps.LatLng(latitude, longitude);
                        var marker = new google.maps.Marker({
                            position: latLng,
                            map: map
                        });
                    });
            }
            //var script = document.createElement('script');
            //script.src = data;
            //document.getElementsByTagName('head')[0].appendChild(script);
            //map.data.loadGeoJson(data.json);
            // Loop through the results array and place a marker for each
            // set of coordinates.
            //}

        
        });
    }

    window.eqfeed_callback = function (results) {
        for (var i = 0; i < results.features.length; i++) {
            var latcoord = results.features[i].data.latitude;
            var lngcoord = results.features[i].data.longitude;
            var latLng = new google.maps.LatLng(lngcoord, latcoord);
            var marker = new google.maps.Marker({
                position: latLng,
                map: map
            });
        }
    }


</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCV9jnDSFNYrVPOdqVukVUU3WpALVBTTx8&callback=initMap">
</script>